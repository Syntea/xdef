<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="/tutorial/styles/lineNumbers.js"> </script>
    <script src="/tutorial/styles/lineNumbers_1.js"> </script>
    <style>.A{min-height:19rem; max-height:19rem; display:flex; overflow:hidden;}</style>    
    <style>.B{min-height:18rem; max-height:18rem; display:flex; overflow:hidden;}</style>
    <title>Create database</title>
  </head>
  <body>
    <form style="background: #EAFFFD" method="post" action="/tutorial/Derby">
      <b>X-definition</b>&nbsp;
      <i>If you have a collection with more
        X-definitions specify the name of root X-definition:
      </i>
      <input name="xdname" value="" type="text"/>
      <div class="A">
        <div id="line-numbers"></div>
        <textarea id="textarea" style="width: 100%;" name="xdef">
<xd:def xmlns:xd="http://www.xdef.org/xdef/4.2" name="Example" root="schema" >
  <xd:declaration scope = "local"> external Service service; </xd:declaration>
  <schema name="string; onTrue service.execute('CREATE SCHEMA '+ getText());
                        finally outln('Dabase schema created.')">
    <table xd:script="occurs +" name = "string">
      string;
      onTrue try {
        service.execute('CREATE TABLE '+xpath('../@name')+'.'+@name+' ('+getText()+')');
      } catch (Exception ex) { error(toString(ex)); }
    </table>
  </schema>
</xd:def></textarea>
      </div>
      <b>XML data</b>
      <div class="B">
        <div id="line-numbers_1"> </div>
        <textarea id="textarea_1" style="width:100%;" name="data">
<schema name="BOOKS">
  <table name="AUTHOR">
    IDAUTHOR INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    AUTHOR VARCHAR(100) NOT NULL, PRIMARY KEY(IDAUTHOR), UNIQUE (AUTHOR)
  </table>
  <table name="TITLE">
    IDTITLE INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    TITLE VARCHAR(100) NOT NULL, ISSUED INTEGER, ISBN VARCHAR(10) NOT NULL,
    PRIMARY KEY(IDTITLE), UNIQUE (TITLE, ISBN)
  </table>
  <table name="TITLE_AUTHOR">
    IDTITLE_AUTHOR INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    IDAUTHOR INTEGER NOT NULL, IDTITLE INTEGER NOT NULL,
    PRIMARY KEY(IDTITLE_AUTHOR), UNIQUE (IDAUTHOR, IDTITLE),
    FOREIGN KEY (IDAUTHOR) REFERENCES BOOKS.AUTHOR(IDAUTHOR),
    FOREIGN KEY (IDTITLE) REFERENCES BOOKS.TITLE(IDTITLE)
  </table>
</schema></textarea>
      </div>
      <input name='submit' value='Create database schema' type='submit'/>
      <input name="task" value="Create database" type="hidden"/>
      <font style="background-color: lightgrey">
        <i>&nbsp;You can edit <b>X-definition</b> or <b>XML data</b></i>
      </font>
    </form>
  </body>
</html>