<?xml version="1.0" encoding="utf-8"?>
<xd:def  xmlns:xd      ="http://www.xdef.org/xdef/4.0"  
         impl-version  ="2023/10.1" impl-date ="2023-10-31"
         xd:importLocal="DN_type, GAM_type" 
         xd:name       ="DN_common">

 <Adresa
         CisloOrientacni     ="? cisloDomuDN()"
         CisloPopisne        ="? cisloDomuDN()"
         Obec                ="? obecDN()"
         Okres               ="? okresDN()"
         PSC                 ="? pscDN()"
         Stat                ="? statPrevodDN()"
         Telefon1            ="? telefonDN()"
         Telefon2            ="? telefonDN()"
         Ulice               ="? uliceDN()"
 />

 <Doklad
         CisloDokladu        ="? cisloDokladuDN()"
         DatumVydani         ="? datumCasDN()"
         MistoVydani         ="? mistoVydaniDN()"
         Opravneni           ="? opravneniDN()"
         StatVydani          ="? statPrevodDN()"
         TypDokladu          ="  typDokladuDN()"
 />

 <Firma
         IC                  ="? icDN()"
         NazevFirmy          ="  nazevFirmyDN()">
      <Sidlo                 xd:script="0..1; ref Adresa" />
 </Firma>

 <ObjStrankaDN
         CelkovaSkodaKc      ="? castkaKcDN()"
         CisloPopisne        ="? cisloDomuDN()"
         DatumCasDN          ="  datumCasDN()"
         DatumCasDoDN        ="? datumCasDN()"
         HlavniPricina       ="? hlavniPricinaDN()"
         KodOkresu           ="  kodOkresu()"
         Obec                ="? obecDN()"
         Pricina             ="? kodPricinyDN()" 
         Ulice               ="? uliceDN()">
      <Misto                 xd:script="1">mistoTextDN()</Misto>
      <GPS                   xd:script="0..2"
         Delka               ="  gpsCoordinateDN()"
         Sirka               ="  gpsCoordinateDN()"
         System              ="  gpsSystemDN()"
      />
      <RizikovyFaktor        xd:script="0.."
         KodFaktoru          ="  kodRizikovehoFaktoruDN()"
      />
 </ObjStrankaDN>

 <OperaceD1
         CisloDN             ="  enum('???') OR cisloDN()"
         CJ                  ="? cjRelacePolicieDN()"
         IdentZaznamu        ="  msgIdent()"
         KodUtvaruPolicie    ="  enum('???') OR kodUtvaruPolicie()"
         Operace             ="  operationName()"
         RokDN               ="  enum('???') OR rokDN()">
    <Chyby                   xd:script="0..1" >
      <Chyba                 xd:script="0.."
         Hodnota             ="? errorValue()"
         KodChyby            ="  errorCode()"
         Popis               ="? errorDescription()" 
         Typ                 ="  errorType()"
         Xpath               ="? errorXpath()"
      />
    </Chyby>
 </OperaceD1>

 <OperaceD2
         CisloDN             ="  enum('???') OR cisloDN()"
         IdentSouboru        ="  identSouboruDN()"	
         IdentZaznamu        ="  msgIdent()"
         KodUtvaruPolicie    ="  enum('???') OR kodUtvaruPolicie()"
         MD5                 ="  md5()"
         Operace             ="  operationName()"
         RokDN               ="  enum('???') OR rokDN()"
         SeqSouboru          ="? fileSeq()"> 
    <Chyby                   xd:script="0..1" >
      <Chyba                 xd:script="0.."
         Hodnota             ="? errorValue()"
         KodChyby            ="  errorCode()"
         Popis               ="? errorDescription()" 
         Typ                 ="  errorType()"
         Xpath               ="? errorXpath()"
      />
    </Chyby>
 </OperaceD2>

 <Osoba
         DatumNarozeni       ="? datumCasDN()"
         Jmeno               ="? jmenoDN()"
         MistoNarozeni       ="? mistoNarozeniDN()"
         OsobniStav          ="? osobniStavDN()"
         Pohlavi             ="? pohlaviDN()"
         Prijmeni            ="  prijmeniDN()"
         Profese             ="? profeseDN()" 
         RC                  ="? rcDN()"
         RodnePrijmeni       ="? prijmeniDN()"
         StatNarozeni        ="? statPrevodDN()"
         StatniPrislusnost   ="? statPrevodDN()"
         TitulPred           ="? osobaTitulDN()"
         TitulZa             ="? osobaTitulDN()">
      <Pobyt                 xd:script="0..1; ref Adresa" />
      <JinyPobyt             xd:script="0..1; ref Adresa" />
 </Osoba>

 <PovozDN
         DruhPovozu          ="  druhPovozuDN()"
         OznSegmentu         ="  oznSegmentuDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <JinaSkoda             xd:script="0..1; ref Skoda" />
      <Vlastnik              xd:script="0..1">subjektTextDN()</Vlastnik>
 </PovozDN>

 <PredmetDN
         DruhPredmetu        ="  druhPredmetuDN()"
         NazevPredmetu       ="  nazevPredmetuDN()"
         OznSegmentu         ="  oznSegmentuDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <Vlastnik              xd:script="0..1">subjektTextDN()</Vlastnik>
 </PredmetDN>

 <PrilohaPDN     
         CisloDN             ="  cisloDN()"
         Delka               ="  delkaPrilohyDN()" 
         Format              ="  formatSouboruDN()" 
         IdentSouboru        ="  identSouboruDN()"	
         IdentZaznamu        ="  msgIdent()"
         KodUtvaruPolicie    ="  kodUtvaruPolicie()"
         MD5                 ="  md5()" 
         Poradi              ="  poradiPrilohyDN()"
         Repeat              ="? enum('A')"               
         RokDN               ="  rokDN()"
         SeqSouboru          ="? fileSeq()" 
 />

 <!-- Bude-li na vstupu mít KodDN na 7. a 8. místě hodnotu "21" nebo nižší, jedná se o starý formát,
      bude-li hodnota "22" nebo vyšší, jedná se o nový formát. Oba formáty se transformují
      do níže uvedené struktury tak, aby výsledně byl:
      RokDN num(4), tj. doplní se na začátek "20" a CisloDN num(7), tj. doplní se na začátek "00".
 -->
 <ProtokolDN
         CisloDN             ="  cisloDN()"
         CJ                  ="  cjRelacePolicieDN()"
         DatumCasOznameni    ="  datumCasDN()"
         KodUtvaruPolicie    ="  kodUtvaruPolicie()"
         NazevDN             ="  nazevDN()"
         RokDN               ="  rokDN()"
         Zpracovatel         ="  zpracovatelDN()"
 />

 <RozhodnutiDN
         DatumRozhodnuti     ="? datumCasDN()" >
                             rozhodnutiDN()
 </RozhodnutiDN>

 <Skoda                      
         Kc                  ="? castkaKcDN()">
                             ? skodaTextDN()   
 </Skoda>

 <TramvajDN
         CisloDokladuPojisteni="? cisloDokladuPojisteniDN()"
         DruhVozidla         ="  druhVozidlaDN()"
         EvidCislo           ="? evidCisloDN()"
         KodPojistitele      ="? kodPojistiteleDN()"
         Linka               ="  linkaDN()"
         LinkaPoradi         ="? linkaPoradiDN()"
         OznSegmentu         ="  oznSegmentuDN()"
         PojisteniText       ="? pojisteniTextDN()"
         StavBrzd            ="? stavBrzdPopisDN()"
         TypBrzd             ="? typBrzdPopisDN()"
         TypVozidla          ="? typVozidlaDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <JinaSkoda             xd:script="0..1; ref Skoda" />
      <Vlastnik              xd:script="0..1">subjektTextDN()</Vlastnik>
 </TramvajDN>

 <TrolejbusDN
         CisloDokladuPojisteni="? cisloDokladuPojisteniDN()"
         DruhVozidla         ="  druhVozidlaDN()" 
         EvidCislo           ="? evidCisloDN()"
         KodPojistitele      ="? kodPojistiteleDN()"
         Linka               ="  linkaDN()"
         LinkaPoradi         ="? linkaPoradiDN()"
         OznSegmentu         ="  oznSegmentuDN()"
         PojisteniText       ="? pojisteniTextDN()"
         StavBrzd            ="? stavBrzdPopisDN()"
         TypBrzd             ="? typBrzdPopisDN()"
         TypVozidla          ="? typVozidlaDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <JinaSkoda             xd:script="0..1; ref Skoda" />
      <Vlastnik              xd:script="0..1">subjektTextDN()</Vlastnik>
 </TrolejbusDN>

 <UcastnikDN
         AlkoholDech         ="? alkoholDechDN()"
         AlkoholKrev         ="? alkoholKrevDN()"
         OznSegmentu         ="  oznSegmentuDN()"
         PokutaKc            ="? pokutaDN()"
         PokutaZapl          ="? pokutaZaplDN()"
         Pachatel            ="? pachatelDN()"
         Poskozeny           ="? poskozenyDN()"
         PraxeRizeni         ="? praxeRizeniDN()"
         TypUcastnika        ="  typUcastnikaDN()"
         ZdravPojistovna     ="? kodZdravPojistovnyDN()"
         Zraneni             ="? zraneniDN()">
      <JinaSkoda             xd:script="0..1; ref Skoda" />
      <Osoba                 xd:script="0..1; ref Osoba" />
      <Firma                 xd:script="0..1; ref Firma" />
      <Doklad                xd:script="0..;  ref Doklad" />
      <PoruseniZakProvoz     xd:script="0..1">poruseniTextDN()</PoruseniZakProvoz>
      <PoruseniZakPrest      xd:script="0..1">poruseniTextDN()</PoruseniZakPrest>
      <PoruseniZakTrest      xd:script="0..1">poruseniTrestDN()</PoruseniZakTrest>
      <PoruseniZakOst        xd:script="0..1">poruseniTextDN()</PoruseniZakOst>
      <Vazba                 xd:script="0..1">vazbaDN()</Vazba>
 </UcastnikDN>

 <VlakDN
         DruhSoupravy        ="  druhSoupravyDN()"
         OznSegmentu         ="  oznSegmentuDN()"
         Spoj                ="? spojDN()"
         TypSoupravy         ="  typSoupravyDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <JinaSkoda             xd:script="0..1; ref Skoda" />
      <Vlastnik              xd:script="0..1">subjektTextDN()</Vlastnik>
 </VlakDN>

 <VozidloDN  
         CisloDokladuPojisteni="? cisloDokladuPojisteniDN()"
         CisloZK             ="? cisloZKDN()"
         DatumUhradyHP       ="? datumCasDN()"
         DruhVozidla         ="  druhVozidlaDN()"
         KodPojistitele      ="? kodPojistiteleDN()"
         MesicSTKDo          ="? platnostSTKDoDN()"
         MistoUhradyHP       ="? mistoTextDN()"
         MPZ                 ="? mpzDN()"
         OznSegmentu         ="  oznSegmentuDN()"
         PlatnostSTK         ="? platnostSTKDN()"
         PlatnostZKDo        ="? datumCasDN()"
         PlatnostZKOd        ="? datumCasDN()"
         PojisteniText       ="? pojisteniTextDN()"
         PojistneHPKc        ="? pojistneHPDN()"
         RokVyroby           ="? rokDN()"
         SPZ                 ="? spzDN()"
         StavBrzd            ="? stavBrzdPopisDN()"
         TypBrzd             ="? typBrzdPopisDN()"
         TypVozidla          ="? typVozidlaDN()"
         VIN                 ="? vinDN()"
         VydalZK             ="? vydalZKDN()"
         ZnackaVozidla       ="? znackaVozidlaDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <JinaSkoda             xd:script="0..1; ref Skoda" />
      <Drzitel               xd:script="0..1">subjektTextDN()</Drzitel>
 </VozidloDN>

 <ZaznamPDN     
         IdentZaznamu        ="  msgIdent()"
         KrajPolicie         ="  kodKrajePolicie()"
         PlatnostOd          ="  datumCasDN()" 
         Verze               ="? channelTypeVersion()">
   <xd:mixed>
      <Protokol              xd:script="1;    ref ProtokolDN" />
      <Rozhodnuti            xd:script="0..1; ref RozhodnutiDN" />
      <Vyliceni              xd:script="1">vyliceniTextDN()</Vyliceni>
      <ObjStranka            xd:script="1;    ref ObjStrankaDN" />
      <Vozidlo               xd:script="0..;  ref VozidloDN" />
      <Tramvaj               xd:script="0..;  ref TramvajDN" />
      <Trolejbus             xd:script="0..;  ref TrolejbusDN" />
      <Vlak                  xd:script="0..;  ref VlakDN" />
      <Povoz                 xd:script="0..;  ref PovozDN" />
      <Predmet               xd:script="0..;  ref PredmetDN" />
      <Zvire                 xd:script="0..;  ref ZvireDN" />
      <Ucastnik              xd:script="0..;  ref UcastnikDN" />
   </xd:mixed>
 </ZaznamPDN>

 <ZvireDN
         DruhZvirete         ="  druhZvireteDN()" 
         NazevZvirete        ="  nazevZvireteDN()"
         OznSegmentu         ="  oznSegmentuDN()">
      <Skoda                 xd:script="0..1; ref Skoda" />
      <Vlastnik              xd:script="0..1">subjektTextDN()</Vlastnik>
 </ZvireDN>
</xd:def>
